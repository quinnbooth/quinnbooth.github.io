import*as e from"https://cdn.jsdelivr.net/npm/three@0.121.1/build/three.module.js";import{GLTFLoader as $}from"https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/loaders/GLTFLoader.js";import{OrbitControls as ee}from"https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/controls/OrbitControls.js";const te=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))p(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&p(i)}).observe(document,{childList:!0,subtree:!0});function f(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function p(n){if(n.ep)return;n.ep=!0;const s=f(n);fetch(n.href,s)}};te();var M=0,oe=75;const c=new e.Scene,r=new e.PerspectiveCamera(oe,window.innerWidth/window.innerHeight,.1,1e3),S=new e.WebGLRenderer({canvas:document.querySelector("#bg"),antialias:!0});S.setPixelRatio(window.devicePixelRatio);S.setSize(window.innerWidth,window.innerHeight);r.position.setZ(40);S.render(c,r);var G=2*Math.tan(r.fov*Math.PI/180/2)*r.position.z,ne=G*r.aspect;r.position.setZ(500);const ie=new e.PointLight(16777215),Z=new e.AmbientLight(16777215);Z.intensity=.5;c.add(ie);c.add(Z);const N=new $;var re=new e.Clock;const j=new ee(r,S.domElement);j.enabled=!1;new e.TextureLoader().load("images/space3.jpg");const se=new e.SphereGeometry(3,100,10,1e3),ae=new e.SphereGeometry(1,100,10,1e3),ce=new e.SphereGeometry(1.3,100,10,1e3),le=new e.SphereGeometry(1.3,100,10,1e3),pe=new e.SphereGeometry(1,100,10,1e3),he=new e.SphereGeometry(2.3,100,10,1e3),de=new e.CircleGeometry(2.9,100,0,1e3),fe=new e.SphereGeometry(2,100,10,1e3),ue=new e.CircleGeometry(3,100,0,1e3),we=new e.SphereGeometry(1.7,100,10,1e3),me=new e.CircleGeometry(2.5,100,0,1e3),Me=new e.SphereGeometry(1.6,100,10,1e3),ye=new e.CircleGeometry(2.4,100,0,1e3),ve=new e.MeshBasicMaterial({color:15883266,wireframe:!1}),xe=new e.MeshStandardMaterial({color:12141824,wireframe:!1}),Se=new e.MeshStandardMaterial({color:14134077,wireframe:!1}),ge=new e.MeshStandardMaterial({color:4098273,wireframe:!1}),Ce=new e.MeshStandardMaterial({color:12335616,wireframe:!1}),Fe=new e.MeshStandardMaterial({color:14925913,wireframe:!1}),Le=new e.MeshStandardMaterial({color:15323532,wireframe:!0}),be=new e.MeshStandardMaterial({color:15056232,wireframe:!1}),Ae=new e.MeshStandardMaterial({color:13812125,wireframe:!0}),Pe=new e.MeshStandardMaterial({color:11988723,wireframe:!1}),ze=new e.MeshStandardMaterial({color:13563384,wireframe:!0}),Ee=new e.MeshStandardMaterial({color:1926626,wireframe:!1}),Ge=new e.MeshStandardMaterial({color:6590943,wireframe:!0}),R=new e.Mesh(se,ve),je=new e.Mesh(ae,xe),Be=new e.Mesh(ce,Se),Ie=new e.Mesh(le,ge),Re=new e.Mesh(pe,Ce),W=new e.Mesh(he,Fe),We=new e.Mesh(de,Le),D=new e.Mesh(fe,be),De=new e.Mesh(ue,Ae),H=new e.Mesh(we,Pe),He=new e.Mesh(me,ze),O=new e.Mesh(Me,Ee),Oe=new e.Mesh(ye,Ge);var B=0,X=[],Y=[],A=[];function Te(o,l,f,p,n,s){const i=[R,je,Be,Ie,Re,W,D,H,O],g=[W,D,H,O],h=[We,De,He,Oe];if(o==0){var z=ne;G<z&&(z=G);var U=z/20;c.add(R);for(let t=1;t<i.length;t++){c.add(i[t]);var d=2*Math.PI*Math.random();i[t].position.set(l*Math.cos(d),l*Math.sin(d),0),l+=U,n.push(.005*Math.random()),A.push(0)}for(let t=0;t<h.length;t++)c.add(h[t]),h[t].position.set(g[t].position.x,g[t].position.y,0),p.push([.005*Math.random(),.005*Math.random(),.005*Math.random()]);B=1}else if(o==1){i[0].rotation.x+=f[0],i[0].rotation.y+=f[1],i[0].rotation.z+=f[2];for(let t=1;t<i.length;t++){const u=t-1;i[t].rotation.x+=f[0],i[t].rotation.y+=f[1],i[t].rotation.z+=f[2];var I=i[t].position.x,_=i[t].position.y,E=Math.sqrt(Math.pow(I,2)+Math.pow(_,2)),d=Math.acos(I/E)*(-2*s[u]+1)+n[u];i[t].position.x=E*Math.cos(d),i[t].position.y=E*Math.sin(d),Math.abs(d-Math.PI)<n[u]?(d=Math.PI+.001,s[u]=-1*s[u]+1):Math.abs(d)<n[u]&&(d=.001,s[u]=-1*s[u]+1)}for(let t=0;t<h.length;t++)h[t].rotation.x+=p[t][0],h[t].rotation.y+=p[t][1],h[t].rotation.z+=p[t][2],h[t].position.set(g[t].position.x,g[t].position.y,0)}else{B=0;for(var Ne in n)n.pop(),A.pop();for(var Xe in p)p.pop();X=[],Y=[],A=[],c.background=new e.Color(0);for(const t of i)c.remove(t);for(const t of h)c.remove(t)}}const K=new e.BufferGeometry;var J=new Float32Array(9e3);for(let o=0;o<9e3;o++)J[o]=Math.random()*600-300;K.setAttribute("position",new e.BufferAttribute(J,3));let ke=new e.TextureLoader().load("/images/star1.png"),qe=new e.PointsMaterial({color:11184810,size:.75,map:ke,transparent:!0});const x=new e.Points(K,qe);c.add(x);var T=!0,C=0,y=0;function Ve(){r.position.z>250?(r.position.z+=C,C-=.001,y<.0012&&(y+=3e-6),x.rotation.z+=y):r.position.z>45?(r.position.z+=C,C+=.001225,y>75e-6&&(y-=3e-6),x.rotation.z+=y):(x.rotation.z+=75e-6,T&&(c.remove(w),T=!1,M++)),r.rotation.x<.25&&(r.rotation.x+=2e-4),r.position.y>-15&&(r.position.y-=6/500)}const m=new e.PointLight(16777215);m.intensity=2;c.add(m);m.position.set(-2,-2,502);var a=new e.Mesh;N.load("/models/gltf/spaceship1.glb",o=>{o.scene.scale.set(.3,.3,.3),o.scene.position.set(-4.5,.3,498),o.scene.rotation.set(Math.PI/9,-1*Math.PI/7,0),a=o.scene,c.add(a)});var F=0;function k(o){o==0&&(F==100845&&(F=0),a.rotation.x=-.05*Math.sin(F/300)+Math.PI/10,F++)}var L=.01,b=-85e-5;const q=-143e-7,V=12e-7;function Ze(o){o==0?(a.position.x<-1&&(a.position.x+=L,L+=q),a.position.y>0&&(a.position.y+=b,b+=V),a.position.x>=-1&&a.position.y<=0&&v&&v.play(),k(0),x.rotation.z+=75e-6):o==1&&(a.position.x<6&&(a.position.x+=L,L-=2*q),a.position.y>-.5&&(a.position.y+=b,b-=2*V),k(0),m.intensity>0&&(m.intensity=m.intensity-.004),a.position.x>=6&&a.position.y<=-.5&&(M++,c.remove(m)),x.rotation.z+=75e-6)}let P,w,v;N.load("/models/gltf/typingtext1.glb",o=>{w=o.scene,w.scale.set(.25,.01,.25),w.position.set(0,.65,499),w.rotation.set(90,0,0),c.add(w),P=new e.AnimationMixer(w),o.animations.forEach(l=>{v=P.clipAction(l),v.setLoop(e.LoopOnce),v.clampWhenFinished=!0,v.enable=!0})});window.addEventListener("click",function(o){M==0&&a.position.x>=-1&&a.position.y<=0&&(M=1)});window.addEventListener("resize",function(){r.aspect=window.innerWidth/this.window.innerHeight,r.updateProjectionMatrix(),S.setSize(window.innerWidth,window.innerHeight)});function Q(){requestAnimationFrame(Q);var o=re.getDelta();P&&P.update(o),Te(B,5,[.002,.001,.003],Y,X,A),Ze(M),M==2&&Ve(),M==3&&(j.enabled=!0),j.update(),S.render(c,r)}Q();
