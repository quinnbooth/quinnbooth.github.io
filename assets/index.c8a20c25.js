import*as e from"https://cdn.jsdelivr.net/npm/three@0.121.1/build/three.module.js";import{GLTFLoader as T}from"https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/loaders/GLTFLoader.js";const q=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function h(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=h(n);fetch(n.href,o)}};q();var H=75;const a=new e.Scene,w=new e.PerspectiveCamera(H,window.innerWidth/window.innerHeight,.1,1e3),M=new e.WebGLRenderer({canvas:document.querySelector("#bg"),antialias:!0});M.setPixelRatio(window.devicePixelRatio);M.setSize(window.innerWidth,window.innerHeight);w.position.setZ(40);M.render(a,w);var g=2*Math.tan(w.fov*Math.PI/180/2)*w.position.z,O=g*w.aspect;w.position.setZ(500);const W=new e.PointLight(16777215),A=new e.AmbientLight(16777215);A.intensity=.5;a.add(W);a.add(A);const N=new T;new e.TextureLoader().load("images/space3.jpg");const Z=new e.SphereGeometry(3,100,10,1e3),k=new e.SphereGeometry(1,100,10,1e3),K=new e.SphereGeometry(1.3,100,10,1e3),V=new e.SphereGeometry(1.3,100,10,1e3),J=new e.SphereGeometry(1,100,10,1e3),Q=new e.SphereGeometry(2.3,100,10,1e3),U=new e.CircleGeometry(2.9,100,0,1e3),X=new e.SphereGeometry(2,100,10,1e3),Y=new e.CircleGeometry(3,100,0,1e3),_=new e.SphereGeometry(1.7,100,10,1e3),$=new e.CircleGeometry(2.5,100,0,1e3),ee=new e.SphereGeometry(1.6,100,10,1e3),te=new e.CircleGeometry(2.4,100,0,1e3),ne=new e.MeshBasicMaterial({color:15883266,wireframe:!1}),re=new e.MeshStandardMaterial({color:12141824,wireframe:!1}),oe=new e.MeshStandardMaterial({color:14134077,wireframe:!1}),se=new e.MeshStandardMaterial({color:4098273,wireframe:!1}),ae=new e.MeshStandardMaterial({color:12335616,wireframe:!1}),ie=new e.MeshStandardMaterial({color:14925913,wireframe:!1}),ce=new e.MeshStandardMaterial({color:15323532,wireframe:!0}),le=new e.MeshStandardMaterial({color:15056232,wireframe:!1}),he=new e.MeshStandardMaterial({color:13812125,wireframe:!0}),pe=new e.MeshStandardMaterial({color:11988723,wireframe:!1}),ue=new e.MeshStandardMaterial({color:13563384,wireframe:!0}),de=new e.MeshStandardMaterial({color:1926626,wireframe:!1}),we=new e.MeshStandardMaterial({color:6590943,wireframe:!0}),C=new e.Mesh(Z,ne),fe=new e.Mesh(k,re),me=new e.Mesh(K,oe),Me=new e.Mesh(V,se),ye=new e.Mesh(J,ae),L=new e.Mesh(Q,ie),Se=new e.Mesh(U,ce),G=new e.Mesh(X,le),ge=new e.Mesh(Y,he),P=new e.Mesh(_,pe),ve=new e.Mesh($,ue),b=new e.Mesh(ee,de),xe=new e.Mesh(te,we);var v=0,E=[],j=[],m=[];function Fe(s,u,h,i,n,o){const r=[C,fe,me,Me,ye,L,G,P,b],f=[L,G,P,b],c=[Se,ge,ve,xe];if(s==0){var y=O;g<y&&(y=g);var z=y/20;a.add(C);for(let t=1;t<r.length;t++){a.add(r[t]);var l=2*Math.PI*Math.random();r[t].position.set(u*Math.cos(l),u*Math.sin(l),0),u+=z,n.push(.005*Math.random()),m.push(0)}for(let t=0;t<c.length;t++)a.add(c[t]),c[t].position.set(f[t].position.x,f[t].position.y,0),i.push([.005*Math.random(),.005*Math.random(),.005*Math.random()]);v=1}else if(s==1){r[0].rotation.x+=h[0],r[0].rotation.y+=h[1],r[0].rotation.z+=h[2];for(let t=1;t<r.length;t++){const p=t-1;r[t].rotation.x+=h[0],r[t].rotation.y+=h[1],r[t].rotation.z+=h[2];var F=r[t].position.x,D=r[t].position.y,S=Math.sqrt(Math.pow(F,2)+Math.pow(D,2)),l=Math.acos(F/S)*(-2*o[p]+1)+n[p];r[t].position.x=S*Math.cos(l),r[t].position.y=S*Math.sin(l),Math.abs(l-Math.PI)<n[p]?(l=Math.PI+.001,o[p]=-1*o[p]+1):Math.abs(l)<n[p]&&(l=.001,o[p]=-1*o[p]+1)}for(let t=0;t<c.length;t++)c[t].rotation.x+=i[t][0],c[t].rotation.y+=i[t][1],c[t].rotation.z+=i[t][2],c[t].position.set(f[t].position.x,f[t].position.y,0)}else{v=0;for(var be in n)n.pop(),m.pop();for(var Ae in i)i.pop();E=[],j=[],m=[],a.background=new e.Color(0);for(const t of r)a.remove(t);for(const t of c)a.remove(t)}}const B=new e.BufferGeometry;var R=new Float32Array(9e3);for(let s=0;s<9e3;s++)R[s]=Math.random()*600-300;B.setAttribute("position",new e.BufferAttribute(R,3));let Ce=new e.TextureLoader().load("/images/star1.png"),Le=new e.PointsMaterial({color:11184810,size:.75,map:Ce,transparent:!0});const Ge=new e.Points(B,Le);a.add(Ge);const x=new e.PointLight(16777215);x.intensity=2;a.add(x);x.position.set(-2,-2,502);var d;N.load("/models/gltf/spaceship1.glb",s=>{s.scene.scale.set(.3,.3,.3),s.scene.position.set(-4.5,-.7,497),s.scene.rotation.set(Math.PI/7,-1*Math.PI/7,0),d=s.scene,a.add(d)});function Pe(s){s==0&&(d.position.x<-.7&&(d.position.x+=.01),d.position.y>-1&&(d.position.y-=8e-4))}function I(){requestAnimationFrame(I),Fe(v,5,[.002,.001,.003],j,E,m),d&&Pe(0),M.render(a,w)}I();
