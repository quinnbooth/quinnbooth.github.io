import*as e from"https://cdn.jsdelivr.net/npm/three@0.121.1/build/three.module.js";import{GLTFLoader as te}from"https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/loaders/GLTFLoader.js";import{OrbitControls as oe}from"https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/controls/OrbitControls.js";const ne=function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function u(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(n){if(n.ep)return;n.ep=!0;const s=u(n);fetch(n.href,s)}};ne();var m=0,ie=75;const l=new e.Scene,i=new e.PerspectiveCamera(ie,window.innerWidth/window.innerHeight,.1,1e3),v=new e.WebGLRenderer({canvas:document.querySelector("#bg"),antialias:!0});v.setPixelRatio(window.devicePixelRatio);v.setSize(window.innerWidth,window.innerHeight);v.shadowMap.enabled=!0;i.position.setZ(40);v.render(l,i);var B=2*Math.tan(i.fov*Math.PI/180/2)*i.position.z,re=B*i.aspect;i.position.setZ(500);const ae=new e.PointLight(16777215),X=new e.AmbientLight(16777215);X.intensity=.5;l.add(ae);l.add(X);const Y=new te;var se=new e.Clock;const I=new oe(i,v.domElement);I.enabled=!1;const ce=new e.FontLoader;new e.TextureLoader().load("images/space3.jpg");const le=new e.SphereGeometry(3,100,10,1e3),pe=new e.SphereGeometry(1,100,10,1e3),he=new e.SphereGeometry(1.3,100,10,1e3),de=new e.SphereGeometry(1.3,100,10,1e3),fe=new e.SphereGeometry(1,100,10,1e3),ue=new e.SphereGeometry(2.3,100,10,1e3),we=new e.CircleGeometry(2.9,100,0,1e3),me=new e.SphereGeometry(2,100,10,1e3),Me=new e.CircleGeometry(3,100,0,1e3),ye=new e.SphereGeometry(1.7,100,10,1e3),ve=new e.CircleGeometry(2.5,100,0,1e3),xe=new e.SphereGeometry(1.6,100,10,1e3),Se=new e.CircleGeometry(2.4,100,0,1e3),ge=new e.MeshBasicMaterial({color:15883266,wireframe:!1}),Fe=new e.MeshStandardMaterial({color:12141824,wireframe:!1}),Ce=new e.MeshStandardMaterial({color:14134077,wireframe:!1}),Le=new e.MeshStandardMaterial({color:4098273,wireframe:!1}),be=new e.MeshStandardMaterial({color:12335616,wireframe:!1}),ze=new e.MeshStandardMaterial({color:14925913,wireframe:!1}),Ae=new e.MeshStandardMaterial({color:15323532,wireframe:!0}),Pe=new e.MeshStandardMaterial({color:15056232,wireframe:!1}),Ge=new e.MeshStandardMaterial({color:13812125,wireframe:!0}),Ee=new e.MeshStandardMaterial({color:11988723,wireframe:!1}),je=new e.MeshStandardMaterial({color:13563384,wireframe:!0}),Be=new e.MeshStandardMaterial({color:1926626,wireframe:!1}),Ie=new e.MeshStandardMaterial({color:6590943,wireframe:!0}),D=new e.Mesh(le,ge),Re=new e.Mesh(pe,Fe),ke=new e.Mesh(he,Ce),De=new e.Mesh(de,Le),Te=new e.Mesh(fe,be),T=new e.Mesh(ue,ze),We=new e.Mesh(we,Ae),W=new e.Mesh(me,Pe),He=new e.Mesh(Me,Ge),H=new e.Mesh(ye,Ee),Oe=new e.Mesh(ve,je),O=new e.Mesh(xe,Be),qe=new e.Mesh(Se,Ie);var R=0,K=[],_=[],P=[];function Ve(o,p,u,h,n,s){const r=[D,Re,ke,De,Te,T,W,H,O],C=[T,W,H,O],d=[We,He,Oe,qe];if(o==0){var E=re;B<E&&(E=B);var $=E/20;l.add(D);for(let t=1;t<r.length;t++){l.add(r[t]);var f=2*Math.PI*Math.random();r[t].position.set(p*Math.cos(f),p*Math.sin(f),0),p+=$,n.push(.005*Math.random()),P.push(0)}for(let t=0;t<d.length;t++)l.add(d[t]),d[t].position.set(C[t].position.x,C[t].position.y,0),h.push([.005*Math.random(),.005*Math.random(),.005*Math.random()]);R=1}else if(o==1){r[0].rotation.x+=u[0],r[0].rotation.y+=u[1],r[0].rotation.z+=u[2];for(let t=1;t<r.length;t++){const w=t-1;r[t].rotation.x+=u[0],r[t].rotation.y+=u[1],r[t].rotation.z+=u[2];var k=r[t].position.x,ee=r[t].position.y,j=Math.sqrt(Math.pow(k,2)+Math.pow(ee,2)),f=Math.acos(k/j)*(-2*s[w]+1)+n[w];r[t].position.x=j*Math.cos(f),r[t].position.y=j*Math.sin(f),Math.abs(f-Math.PI)<n[w]?(f=Math.PI+.001,s[w]=-1*s[w]+1):Math.abs(f)<n[w]&&(f=.001,s[w]=-1*s[w]+1)}for(let t=0;t<d.length;t++)d[t].rotation.x+=h[t][0],d[t].rotation.y+=h[t][1],d[t].rotation.z+=h[t][2],d[t].position.set(C[t].position.x,C[t].position.y,0)}else{R=0;for(var Je in n)n.pop(),P.pop();for(var Qe in h)h.pop();K=[],_=[],P=[],l.background=new e.Color(0);for(const t of r)l.remove(t);for(const t of d)l.remove(t)}}const J=new e.BufferGeometry;var Q=new Float32Array(9e3);for(let o=0;o<9e3;o++)Q[o]=Math.random()*600-300;J.setAttribute("position",new e.BufferAttribute(Q,3));let Ze=new e.TextureLoader().load("/images/star1.png"),Ne=new e.PointsMaterial({color:11184810,size:.75,map:Ze,transparent:!0});const g=new e.Points(J,Ne);l.add(g);var q=!0,L=0,x=0;function Xe(){i.position.z>250?(i.position.z+=L,L-=.001,x<.0012&&(x+=3e-6),g.rotation.z+=x):i.position.z>45?(i.position.z+=L,L+=.001225,x>75e-6&&(x-=3e-6),g.rotation.z+=x):(g.rotation.z+=75e-6,q&&(l.remove(M),q=!1,F=1,m++)),i.rotation.x<.25&&(i.rotation.x+=2e-4),i.position.y>-15&&(i.position.y-=6/500)}const y=new e.PointLight(16777215);y.intensity=2;l.add(y);y.position.set(-2,-2,502);var a=new e.Mesh;Y.load("/models/gltf/spaceship1.glb",o=>{o.scene.scale.set(.3,.3,.3),o.scene.position.set(-4.5,.3,498),o.scene.rotation.set(Math.PI/9,-1*Math.PI/7,0),a=o.scene,l.add(a)});var b=0;function V(o){o==0&&(b==100845&&(b=0),a.rotation.x=-.05*Math.sin(b/300)+Math.PI/10,b++)}var z=.01,A=-85e-5;const Z=-143e-7,N=12e-7;function Ye(o){o==0?(a.position.x<-1&&(a.position.x+=z,z+=Z),a.position.y>0&&(a.position.y+=A,A+=N),a.position.x>=-1&&a.position.y<=0&&S&&S.play(),V(0),g.rotation.z+=75e-6):o==1&&(a.position.x<6&&(a.position.x+=z,z-=2*Z),a.position.y>-.5&&(a.position.y+=A,A-=2*N),V(0),y.intensity>0&&(y.intensity=y.intensity-.004),a.position.x>=6&&a.position.y<=-.5&&(m++,l.remove(y)),g.rotation.z+=75e-6)}let G,M,S;Y.load("/models/gltf/typingtext1.glb",o=>{M=o.scene,M.scale.set(.25,.01,.25),M.position.set(0,.65,499),M.rotation.set(90,0,0),l.add(M),G=new e.AnimationMixer(M),o.animations.forEach(p=>{S=G.clipAction(p),S.setLoop(e.LoopOnce),S.clampWhenFinished=!0,S.enable=!0})});window.addEventListener("click",function(o){m==0&&a.position.x>=-1&&a.position.y<=0?m=1:m==3&&F==2&&F++});window.addEventListener("resize",function(){i.aspect=window.innerWidth/this.window.innerHeight,i.updateProjectionMatrix(),v.setSize(window.innerWidth,window.innerHeight)});var F=0;let Ke=`Scroll to zoom
Drag to rotate
Click Sun to pause planets
Click planet to expore contents`,c=new e.Mesh;ce.load("/models/fonts/Cairo_Bold.json",o=>{const p=new e.TextGeometry(Ke,{font:o,size:1.25,height:.1});c=new e.Mesh(p,[new e.MeshPhongMaterial({color:16777215,transparent:!0}),new e.MeshPhongMaterial({color:3355443,transparent:!0})]),c.position.set(-40,-15,0),c.material[0].opacity=0,c.material[1].opacity=0,l.add(c)});function _e(o){c&&c.material[0]&&c.material[1]&&(o==1?c.material[0].opacity<1&&c.material[1].opacity<1?(c.material[0].opacity+=.002,c.material[1].opacity+=.002):F++:o==3&&(c.material[0].opacity<=0&&c.material[1].opacity<=0||(c.material[0].opacity-=.001,c.material[1].opacity-=.001)),c.lookAt(i.position.x,i.position.y,i.position.z))}function U(){requestAnimationFrame(U);var o=se.getDelta();G&&G.update(o),Ve(R,5,[.002,.001,.003],_,K,P),a&&Ye(m),m==2&&Xe(),m==3&&(I.enabled=!0,_e(F)),I.update(),v.render(l,i)}U();
